:root{
  /* 紙張尺寸（A5 預設）：可自行調整 */
  --mm:3.7795275591px; /* 1mm => px */
  --paper-w-mm:148;     /* 短邊寬度（直放） */
  --paper-h-mm:210;     /* 長邊高度（直放） */

  /* 版心與排版 */
  --pad:6%;             /* 內縮 */
  --ink:#111827;        /* 文字色 */
  --muted:#6b7280;      /* 次色 */
  --fs:1.02rem;         /* 正文字號（js 會覆蓋） */
  --lh:1.8;             /* 行距（js 會覆蓋） */
}

/* ========== Reset / Base ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:#e6ebff;
  font-family:'Noto Sans TC',system-ui,-apple-system,Segoe UI,sans-serif;
  background:#000 url('https://shierusha.github.io/school-battle/teachers/img/8.webp') center top / cover no-repeat fixed;
}

/* ========== App Bar ========== */
.appbar{
  position:sticky; top:0; z-index:100;
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:10px 14px; background:rgba(15,27,51,.85); border-bottom:1px solid #223057;
}
.brand{display:flex;gap:.6rem;align-items:center;font-weight:700}
#bookTitle{outline:none}
#bookTitle[contenteditable="true"]{border-bottom:1px dashed #8aa1ff}
.tools{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

/* ========== Buttons ========== */
.btn{ background:#16244a; border:1px solid #3a4a78; color:#fff; padding:5px 10px; border-radius:10px; cursor:pointer }
.btn.primary{ background:#6f82ff; border-color:#6f82ff }
.btn.danger{ background:#2a0f18; border-color:#6b1b2e; color:#ffb3c2 }
.btn.ghost{ background:#ffffff18; border-color:#ffffff33 }
.btn:disabled{ opacity:.5; cursor:default }

/* ========== Side Toolbars / Dock ========== */
.side{ position:fixed; top:5%; display:flex; gap:8px; z-index:90 }
.side.left{ left:10px }
.side.right{ right:10px }
.dock{ position:fixed; left:0; right:0; bottom:1%; display:flex; gap:10px; justify-content:center; z-index:90 }
.dock:nth-of-type(1){ bottom:10px }
.dock:nth-of-type(2){ bottom:60px }

/* ========== Stage / Scaler ========== */
.stage{ display:grid; place-items:center; min-height:calc(100vh - 160px); padding:12px; position:relative; z-index:10; }
.scaler{ transform-origin:top center }

/* ========== Book (由 BookFlip 掛載) ========== */
.book{
  position:relative;
  width:calc(var(--paper-w-mm)*var(--mm));
  height:calc(var(--paper-h-mm)*var(--mm));
  /* 你也可自行覆蓋 perspective：
     perspective: 2000px;  // 若想在 CSS 固定，也可，預設走 JS options.perspective */
}

/* ====== 下面這些是「可改外觀」的樣式（不影響功能） ====== */
/* 紙張容器（BookFlip 會產生 .paper，這裡只做外觀） */
.book .paper{
  border-radius:10px;
  overflow:hidden;
}
/* 內頁 */
.book .page{
  position:absolute; inset:0; padding:var(--pad);
  display:flex; flex-direction:column; background:#fff; color:var(--ink);
}
/* 正反面（你可自由換背景或漸層） */
.book .front{ background:#fff; }
.book .back { background:#fafafa;transform: rotateY(180deg);  }

/* 章節籤 / 頁碼（你的 app.js 也會產生） */
.chapter-chip{ position:absolute; top:var(--pad); font-size:.85rem; color:#6b7280 }
.page-no{ position:absolute; bottom:var(--pad); font-variant-numeric:tabular-nums; color:#9aa3b2 }
/* 左右頁各自的對齊，可按需覆蓋 */
.paper.left  .chapter-chip{ left:var(--pad) }
.paper.right .chapter-chip{ right:var(--pad) }
.paper.left  .page-no{ left:var(--pad) }
.paper.right .page-no{ right:var(--pad) }

/* 正文區（可編輯） */
.body-text{
  flex:1; margin-top:.25rem; white-space:pre-wrap; line-height:var(--lh); font-size:var(--fs);
  overflow:hidden; outline:none; tab-size:2;
}
.ph:empty::before{ content:attr(data-ph); color:#95a0c2 }

/* 直排（章節籤與頁碼位置不變，僅正文排版改直書） */
.vertical .body-text{ writing-mode:vertical-rl; text-orientation:upright; line-height:1.9 }

/* 版型模板（與原版一致） */
.tpl-divider-light .page{ display:grid; place-items:center; text-align:center }
.tpl-divider-dark  { background:#555; color:#fff }
.tpl-divider-dark .page{ display:grid; place-items:center; text-align:center }
.tpl-illustration .page{ padding:0 }
.tpl-illustration img{ width:100%; height:100%; object-fit:cover; display:block }

/* =========================
   已刪除：舊翻頁動畫相關 CSS
   - #flipOverlay, .turn, .singleTurn, .foldShade, .face
   - @keyframes flipRightNext / flipLeftPrev / singleCurl / singleCurlReverse
   以上全部交給 BookFlip 插件處理
========================= */

